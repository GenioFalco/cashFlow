import os
from dotenv import load_dotenv

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—É—Ä—Å–∞ ECR
try:
    from currency_rates import get_ecr_rub_rate, get_cbr_currency_rates
except ImportError:
    # –ó–∞–≥–ª—É—à–∫–∞, –µ—Å–ª–∏ –º–æ–¥—É–ª—å –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω
    def get_ecr_rub_rate(): return 1625
    def get_cbr_currency_rates(): return {"RUB": 1.0, "EUR": 100.0, "PLN": 23.0, "KGS": 1.12, "GBP": 116.0, "CNY": 12.7}

load_dotenv()

BOT_TOKEN = os.getenv("BOT_TOKEN")

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫—É—Ä—Å–æ–≤ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
try:
    # –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
    CURRENCY_RATES_DYNAMIC = get_cbr_currency_rates() or {}
except Exception as e:
    print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç: {e}")
    CURRENCY_RATES_DYNAMIC = {}

# –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä—É–±–ª—è (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ)
CURRENCY_RATES = {
    "RUB": 1.0,       # –†—É–±–ª—å
    "EUR": 100.0,     # –ï–≤—Ä–æ
    "PLN": 23.0,      # –ó–ª–æ—Ç—ã–π
    "KGS": 1.12,      # –°–æ–º
    "GBP": 116.0,     # –§—É–Ω—Ç
    "CNY": 12.7,      # –Æ–∞–Ω—å
}

# –°–∏–º–≤–æ–ª—ã –≤–∞–ª—é—Ç
CURRENCY_SYMBOLS = {
    "RUB": "‚ÇΩ",       # –†—É–±–ª—å
    "EUR": "‚Ç¨",       # –ï–≤—Ä–æ
    "PLN": "z≈Ç",      # –ó–ª–æ—Ç—ã–π
    "KGS": "—Å",       # –°–æ–º
    "GBP": "¬£",       # –§—É–Ω—Ç
    "CNY": "¬•",       # –Æ–∞–Ω—å
}

# –≠–º–æ–¥–∑–∏ —Ñ–ª–∞–≥–æ–≤ —Å—Ç—Ä–∞–Ω
CURRENCY_FLAGS = {
    "RUB": "üá∑üá∫",     # –†–æ—Å—Å–∏—è
    "EUR": "üá™üá∫",     # –ï–≤—Ä–æ–ø–µ–π—Å–∫–∏–π –°–æ—é–∑
    "PLN": "üáµüá±",     # –ü–æ–ª—å—à–∞
    "KGS": "üá∞üá¨",     # –ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω
    "GBP": "üá¨üáß",     # –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è
    "CNY": "üá®üá≥",     # –ö–∏—Ç–∞–π
}

# –ù–∞–∑–≤–∞–Ω–∏—è –≤–∞–ª—é—Ç —Å —Ñ–ª–∞–≥–∞–º–∏
CURRENCY_NAMES = {
    "RUB": "üá∑üá∫ –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å",
    "EUR": "üá™üá∫ –ï–≤—Ä–æ",
    "PLN": "üáµüá± –ü–æ–ª—å—Å–∫–∏–π –∑–ª–æ—Ç—ã–π",
    "KGS": "üá∞üá¨ –ö–∏—Ä–≥–∏–∑—Å–∫–∏–π —Å–æ–º",
    "GBP": "üá¨üáß –§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤",
    "CNY": "üá®üá≥ –ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å",
}

# –ë–æ–Ω—É—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∞–ª—é—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ
CURRENCY_BONUS_RATES = {
    "RUB": [
        (1000000, 200),  # –æ—Ç 1000000‚ÇΩ ‚Äî +200%
        (500000, 175),   # –æ—Ç 500000‚ÇΩ ‚Äî +175%
        (100000, 150),   # –æ—Ç 100000‚ÇΩ ‚Äî +150%
        (50000, 125),    # –æ—Ç 50000‚ÇΩ ‚Äî +125%
        (10000, 100),    # –æ—Ç 10000‚ÇΩ ‚Äî +100%
        (5000, 75),      # –æ—Ç 5000‚ÇΩ ‚Äî +75%
        (1000, 50),      # –æ—Ç 1000‚ÇΩ ‚Äî +50%
        (0, 0)           # –º–µ–Ω—å—à–µ ‚Äî +0%
    ],
    "EUR": [
        (10000, 150),    # –æ—Ç 10000‚Ç¨ ‚Äî +150%
        (5000, 130),     # –æ—Ç 5000‚Ç¨ ‚Äî +130%
        (3000, 120),     # –æ—Ç 3000‚Ç¨ ‚Äî +120%
        (4000, 130),     # –æ—Ç 4000‚Ç¨ ‚Äî +130%
        (5000, 140),     # –æ—Ç 5000‚Ç¨ ‚Äî +140%
        (1000, 100),     # –æ—Ç 1000‚Ç¨ ‚Äî +100%
        (500, 80),     # –æ—Ç 500‚Ç¨ ‚Äî +80%
        (250, 70),      # –æ—Ç 250‚Ç¨ ‚Äî +70%
        (100, 60),      # –æ—Ç 100‚Ç¨ ‚Äî +60%
        (50, 50),        # –æ—Ç 50‚Ç¨ ‚Äî +50%
        (0, 0)           # –º–µ–Ω—å—à–µ ‚Äî +0%
    ],
    "PLN": [
        (50000, 150),    # –æ—Ç 50000z≈Ç ‚Äî +150%
        (25000, 130),    # –æ—Ç 25000z≈Ç ‚Äî +130%
        (15000, 120),    # –æ—Ç 10000z≈Ç ‚Äî +120%
        (10000, 110),    # –æ—Ç 10000z≈Ç ‚Äî +110%
        (5000, 100),    # –æ—Ç 10000z≈Ç ‚Äî +100%
        (2500, 80),     # –æ—Ç 5000z≈Ç ‚Äî +80%
        (1000, 70),     # –æ—Ç 1000z≈Ç ‚Äî +70%
        (500, 60),       # –æ—Ç 500z≈Ç ‚Äî +60%
        (250, 50),       # –æ—Ç 250z≈Ç ‚Äî +50%
        (0, 0)           # –º–µ–Ω—å—à–µ ‚Äî +0%
    ],
    "KGS": [
        (1000000, 200), # –æ—Ç 1000000c ‚Äî +200%
        (500000, 175),  # –æ—Ç 500000c ‚Äî +175%
        (100000, 150),  # –æ—Ç 100000c ‚Äî +150%
        (50000, 125),   # –æ—Ç 50000c ‚Äî +125%
        (10000, 100),   # –æ—Ç 10000c ‚Äî +100%
        (5000, 75),     # –æ—Ç 5000c ‚Äî +75%
        (1000, 50),      # –æ—Ç 1000c ‚Äî +50%
        (0, 0)           # –º–µ–Ω—å—à–µ ‚Äî +0%
    ],
    "GBP": [
        (10000, 150),    # –æ—Ç 10000¬£ ‚Äî +150%
        (5000, 130),     # –æ—Ç 5000¬£ ‚Äî +130%
        (3000, 120),     # –æ—Ç 3000¬£ ‚Äî +120%
        (2000, 110),     # –æ—Ç 2000¬£ ‚Äî +110%
        (1000, 100),     # –æ—Ç 1000‚Ç¨ ‚Äî +100%
        (500, 80),     # –æ—Ç 500‚Ç¨ ‚Äî +80%
        (100, 150),     # –æ—Ç 1000¬£ ‚Äî +150%
        (250, 70),      # –æ—Ç 250¬£ ‚Äî +70%
        (100, 60),      # –æ—Ç 100¬£ ‚Äî +60%
        (50, 50),        # –æ—Ç 50¬£ ‚Äî +50%
        (0, 0)           # –º–µ–Ω—å—à–µ ‚Äî +0%
    ],
    "CNY": [
        (100000, 150),   # –æ—Ç 100000¬• ‚Äî +150%
        (50000, 130),    # –æ—Ç 50000¬• ‚Äî +130%
        (30000, 120),    # –æ—Ç 30000¬• ‚Äî +120%
        (20000, 110),    # –æ—Ç 20000¬• ‚Äî +110%
        (10000, 100),    # –æ—Ç 10000¬• ‚Äî +100%
        (5000, 80),     # –æ—Ç 5000¬• ‚Äî +125%
        (2500, 110),     # –æ—Ç 2500¬• ‚Äî +110%
        (1000, 100),     # –æ—Ç 1000¬• ‚Äî +100%
        (500, 50),       # –æ—Ç 500¬• ‚Äî +50%
        (0, 0)           # –º–µ–Ω—å—à–µ ‚Äî +0%
    ]
}

# –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ ECR
try:
    # –ü–æ–ª—É—á–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å ECR –≤ —Ä—É–±–ª—è—Ö –¥–ª—è –ø–æ–∫—É–ø–∫–∏ (–ø—Ä–æ–¥–∞–∂–Ω—ã–π –∫—É—Ä—Å –±–∏—Ä–∂–∏)
    ECR_SELL_RATE = get_ecr_rub_rate() or 1625  # –ö—É—Ä—Å –ø—Ä–æ–¥–∞–∂–∏ ECR
    
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫—É—Ä—Å –ø—Ä–∏–µ–º–∞ ECR, —É–º–Ω–æ–∂–∞—è –∫—É—Ä—Å –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 4
    ECR_BUY_RATE = ECR_SELL_RATE * 4  # –ö—É—Ä—Å –ø—Ä–∏–µ–º–∞ ECR –≤ —Å–∏—Å—Ç–µ–º—É 
    
    # –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –∫—É—Ä—Å –ø—Ä–∏–µ–º–∞ ECR –¥–ª—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ (–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç 5)
    ECR_ACCUMULATIVE_BUY_RATE = ECR_SELL_RATE * 5  # –ö—É—Ä—Å –ø—Ä–∏–µ–º–∞ ECR –¥–ª—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
    
    # –î–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –æ—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
    ECR_PURCHASE_RATE = ECR_BUY_RATE
except Exception as e:
    print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—É—Ä—Å–∞ ECR: {e}")
    ECR_SELL_RATE = 1625  # –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏
    ECR_BUY_RATE = ECR_SELL_RATE * 4  # –í—ã—á–∏—Å–ª—è–µ–º –ø–æ —Ñ–æ—Ä–º—É–ª–µ, –¥–∞–∂–µ –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
    ECR_ACCUMULATIVE_BUY_RATE = ECR_SELL_RATE * 5  # –ö—É—Ä—Å –ø—Ä–∏–µ–º–∞ –¥–ª—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞
    ECR_PURCHASE_RATE = ECR_BUY_RATE

# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
MIN_AMOUNT = 1000
MAX_AMOUNT = 10000000

# –ù–∞—á–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
INITIAL_PERCENT = 0.3

# –®–∞–≥ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–Ω—Ç–∞
PERCENT_STEP = 0.01

# –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è
MAX_PERCENT = 1.0


CURRENCY_LIMITS = {
    "EUR": {"min": 50, "max": 100000},      # –ï–≤—Ä–æ
    "PLN": {"min": 250, "max": 500000},     # –ü–æ–ª—å—Å–∫–∏–π –∑–ª–æ—Ç—ã–π
    "KGS": {"min": 1000, "max": 10000000},  # –ö–∏—Ä–≥–∏–∑—Å–∫–∏–π —Å–æ–º
    "GBP": {"min": 50, "max": 100000},      # –§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤
    "CNY": {"min": 500, "max": 1000000},    # –Æ–∞–Ω—å
    "RUB": {"min": 1000, "max": 10000000}    # –†—É–±–ª—å
}

# –ü—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ —Å—Ç–∞–≤–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—É–º–º –≤–∫–ª–∞–¥–∞ (–≤ —Ä—É–±–ª—è—Ö)
BONUS_RATES = {
    1000000: 2.0,   # 200% –¥–ª—è —Å—É–º–º—ã –æ—Ç 1,000,000 —Ä—É–±
    500000: 1.75,   # 175% –¥–ª—è —Å—É–º–º—ã –æ—Ç 500,000 —Ä—É–±
    100000: 1.5     # 150% –¥–ª—è —Å—É–º–º—ã –æ—Ç 100,000 —Ä—É–±
} 